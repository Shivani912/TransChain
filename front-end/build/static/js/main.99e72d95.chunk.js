(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{230:function(e,t,a){e.exports=a(431)},235:function(e,t,a){},431:function(e,t,a){"use strict";a.r(t);var n,r,s,c,i,l=a(0),m=a.n(l),d=a(51),o=a.n(d),u=(a(235),a(28)),p=a(38),h=function(){return m.a.createElement("nav",{className:"nav-wrapper grey darken-3"},m.a.createElement("div",{className:"container"},m.a.createElement(u.b,{to:"/",className:"brand-logo"},"Transchain"),m.a.createElement("ul",{className:"right"},m.a.createElement("li",null,m.a.createElement(u.c,{to:"/institute"},"Institution")))))},E=a(8),b=a(10),g=a(12),v=a(11),f=a(13),N=a(21),y=a(26),I=a(94),D=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={ins_name:"",ins_acc_address:"",ins_pk:"",ins_contract_addr:""},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.registration(a.state)},a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"container"},m.a.createElement("form",{onSubmit:this.handleSubmit},m.a.createElement("h4",{className:"grey-text text-darken-3"}," Want to join us ?"),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"ins_name",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"ins_name"},"Institute Name")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"ins_acc_address",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"ins_acc_address"},"Metamask Address")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"ins_pk",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"ins_pk"},"Institute PK")),m.a.createElement("div",{className:"input-field"},m.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Register",m.a.createElement("i",{className:"material-icons right"},"send")))))}}]),t}(l.Component),O=Object(y.b)(null,function(e){return{registration:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("institutions").add(Object(I.a)({},e,{createdAt:new Date})).then(function(a){alert("Institute Added with ID: "+a.id),console.log("Institute Added with ID: ",a.id),t({type:"ADD_INSTITUTE",newInstitute:e})}).catch(function(e){t({tyre:"ADD_INSTITUTE_ERROR",err:e})})}}(t))}}})(D),j=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={ins_id:"",ins_addr:""},a.handleChange=function(e){a.setState(Object(N.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state)},a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"container"},m.a.createElement("form",{onSubmit:this.handleSubmit},m.a.createElement("h4",{className:"grey-text text-darken-3"},"Already a member?"),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"ins_id",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"ins_id"},"Institute ID")),m.a.createElement(u.b,{to:"/instituteDetails/"+this.state.ins_id},m.a.createElement("div",{className:"input-field"},m.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Log In",m.a.createElement("i",{className:"material-icons right"},"send"))))))}}]),t}(l.Component),w=function(e){var t=e.transcript;return m.a.createElement("div",{className:"card z-depth-0"},m.a.createElement("div",{className:"card-content grey-text text-darken-3"},m.a.createElement("span",{className:"card-title"},t.transcriptID),m.a.createElement("span",{className:"card-text"},t.transcriptDate," "),m.a.createElement("span",{className:"card-text"},t.studentID," "),m.a.createElement("span",{className:"card-text"},t.studentName," "),m.a.createElement("span",{className:"card-text"},t.programName," "),m.a.createElement("span",{className:"card-text"},t.marksDetails," "),m.a.createElement("span",{className:"card-text"},t.instituteId," ")))},x=function(e){var t=e.transcripts;return m.a.createElement("div",null,m.a.createElement("h3",null,"All Transcripts from All Institutes"),t&&t.map(function(e){return m.a.createElement(u.b,{to:"/transcript/"+e.id,key:e.id},m.a.createElement(w,{transcript:e,key:e.id}))}))},_=a(33),k=a(22),C=a(229),T=(a(390),function(e){function t(){return Object(E.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props.transcripts;return m.a.createElement("div",{className:"dashboard container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col s12 m6"},m.a.createElement(O,null)),m.a.createElement("div",{className:"col s12 m6"},m.a.createElement(j,null))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col s12 m6"},m.a.createElement(x,{transcripts:e}))))}},{key:"componentDidUpdate",value:function(e,t){try{e&&e.transcripts.length!==this.props.transcripts.length&&C.a.notify("New Transcripts Added",{position:"bottom-right",duration:null})}catch(a){}}}]),t}(l.Component)),A=Object(k.d)(Object(y.b)(function(e){return{transcripts:e.firestore.ordered.transcripts}}),Object(_.firestoreConnect)([{collection:"transcripts"}]))(T),S=a(31),R=a(143),F=a.n(R),P=a(227),U=a(392),M=[{constant:!0,inputs:[{name:"_transcriptID",type:"uint256"},{name:"_transcriptHash",type:"bytes32"}],name:"isTranscriptAuthentic",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_transcriptHash",type:"bytes32"}],name:"addTranscript",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"}],L=U.getDefaultProvider("ropsten"),z=function(){var e=Object(P.a)(F.a.mark(function e(t){var a,n,r,s,c,l,m;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify(t),n=U.utils.hashMessage(a),r=U.utils.keccak256(n),e.next=6,i.addTranscript(r);case 6:return s=e.sent,e.next=9,s.wait();case 9:c=e.sent,l=c.logs[0].data.toString(),m=parseInt(l)-1,console.log(m),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 18:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){n=e,r=t,s=new U.Contract(n,M,L),c=new U.Wallet(r,L),i=s.connect(c),console.log("logged in")},q=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(g.a)(this,Object(v.a)(t).call(this,e))).state={transcriptID:"",transcriptDate:"",studentID:"",studentName:"",programName:"",marksDetails:"",instituteId:""},a.handleChange=a.handleChange.bind(Object(S.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(a)),a.state.instituteId=a.props.instituteId,a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(N.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addTranscript(this.state),z(this.state)}},{key:"render",value:function(){return m.a.createElement("form",{onSubmit:this.handleSubmit},m.a.createElement("h3",null,"Upload a Transcript"),m.a.createElement("p",null," Enter the Transcript Details as per the Standardised Format"),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"transcriptID",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"transcriptID"},"Transcript ID")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"transcriptDate",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"transcriptDate"},"Transcript Date")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"studentID",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"studentID"},"Student ID")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"studentName",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"studentName"},"Student Name")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"programName",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"programName"},"Program Name")),m.a.createElement("div",{className:"input-field"},m.a.createElement("input",{id:"marksDetails",type:"text",className:"validate",onChange:this.handleChange}),m.a.createElement("label",{htmlFor:"marksDetails"},"Details of Marks")),m.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Add Transcript",m.a.createElement("i",{className:"material-icons right"},"send")))}}]),t}(l.Component),B=Object(y.b)(null,function(e){return{addTranscript:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("transcripts").add(Object(I.a)({},e,{createdAt:new Date})).then(function(a){t({type:"ADD_TRANSCRIPT",transcript:e})}).catch(function(e){t({tyre:"ADD_TRANSCRIPT_ERROR",err:e})})}}(t))}}})(q),J=function(e){var t=e.transcripts,a=e.instituteId;return m.a.createElement("div",null,m.a.createElement("h3",null,"Transcripts Uploaded by us"),t&&t.map(function(e){return e.instituteId===a?m.a.createElement(u.b,{to:"/transcript/"+e.id,key:e.id},m.a.createElement(w,{transcript:e,key:e.id})):m.a.createElement("div",{key:e.id})}))},K=Object(k.d)(Object(y.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.institutions;return{newInstitute:n?n[a]:null,instituteId:a,transcripts:e.firestore.ordered.transcripts}}),Object(_.firestoreConnect)([{collection:"institutions"},{collection:"transcripts"}]))(function(e){var t,a,n=e.newInstitute,r=e.instituteId,s=e.transcripts;return n?(t=n.ins_contract_addr,a=n.ins_pk,W(t,a),m.a.createElement("div",{className:"dashboard container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"card z-depth-0"},m.a.createElement("div",{className:"card-content grey-text text-darken-3"},m.a.createElement("span",{className:"card-title"},"Institute Id - ",r),m.a.createElement("span",{className:"card-text"},"Institute Name - ",n.ins_name," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Institute Address - ",n.ins_acc_address," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Institute PK - ",n.ins_pk," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Institute SmartContract Address - ",n.ins_contract_addr," "),m.a.createElement("br",null)))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col s12 m6"},m.a.createElement(B,{instituteId:r})),m.a.createElement("div",{className:"col s12 m6"},m.a.createElement(J,{transcripts:s,instituteId:r}))))):m.a.createElement("div",{className:"container center"},m.a.createElement("p",null,"Loading Institute ..."))}),H=Object(k.d)(Object(y.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.transcripts;return{transcript:n?n[a]:null}}),Object(_.firestoreConnect)([{collection:"transcripts"}]))(function(e){var t=e.transcript;return t?m.a.createElement("div",{className:"container section"},m.a.createElement("div",{className:"card z-depth-0"},m.a.createElement("div",{className:"card-content grey-text text-darken-3"},m.a.createElement("span",{className:"card-title"},"Transcript Id - ",t.transcriptID),m.a.createElement("span",{className:"card-text"},"Transcript Date - ",t.transcriptDate," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Student Id - ",t.studentID," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Student Name - ",t.studentName," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Program Name - ",t.programName," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Details of Marks - ",t.marksDetails," "),m.a.createElement("br",null),m.a.createElement("span",{className:"card-text"},"Certified by Institution - ",t.instituteId," ")))):m.a.createElement("div",{className:"container center"},m.a.createElement("p",null,"Loading Transcript ..."))});var V=function(){return m.a.createElement(u.a,null,m.a.createElement("div",{className:"App"},m.a.createElement(h,null),m.a.createElement(p.c,null,m.a.createElement(p.a,{path:"/institute",component:A}),m.a.createElement(p.a,{path:"/instituteDetails/:id",component:K}),m.a.createElement(p.a,{path:"/transcript/:id",component:H}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X={},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;arguments.length>1&&arguments[1];return e},Z={},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TRANSCRIPT":return console.log("Added Transcript",t.transcript),e;case"ADD_TRANSCRIPT_ERROR":return console.log("Error Adding Transcript",t.err),e;default:return e}},G={},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_INSTITUTE":return console.log("Added Institute",t.newInstitute),e;case"ADD_INSTITUTE_ERROR":return console.log("Error Adding Institute",t.err),e;default:return e}},ee=a(66),te=Object(k.c)({auth:Y,transcript:$,firestore:ee.firestoreReducer,newInstitute:Q}),ae=a(228),ne=a(144),re=a.n(ne);a(425),a(429);re.a.initializeApp({apiKey:"AIzaSyCRigIXLDkPY6L2cvVwqqEtNq-ZAERN5Dg",authDomain:"transchain-gbc.firebaseapp.com",databaseURL:"https://transchain-gbc.firebaseio.com",projectId:"transchain-gbc",storageBucket:"",messagingSenderId:"789734830513",appId:"1:789734830513:web:0707f9e148ecce99"});var se=re.a,ce=Object(k.e)(te,Object(k.d)(Object(k.a)(ae.a.withExtraArgument({getFirebase:_.getFirebase,getFirestore:ee.getFirestore})),Object(ee.reduxFirestore)(se),Object(_.reactReduxFirebase)(se)));o.a.render(m.a.createElement(y.a,{store:ce},m.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[230,1,2]]]);
//# sourceMappingURL=main.99e72d95.chunk.js.map